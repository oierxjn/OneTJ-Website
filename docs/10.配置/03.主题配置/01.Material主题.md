---
title: Material 主题配置
date: 2025-01-29 00:00:00
permalink: /reference/config/theme
categories:
  - 配置
tags:
  - 配置
  - 主题
description: 介绍 OneTJ 的 Material Design 主题配置。
---

## 主题概述

OneTJ 使用 Material Design 3 主题系统，提供现代化的视觉体验。

## 主题配置

### 当前配置

```dart
// lib/main.dart
MaterialApp.router(
  theme: ThemeData(
    colorScheme: ColorScheme.fromSeed(
      seedColor: const Color.fromARGB(125, 230, 90, 255),
    ),
    useMaterial3: true,
  ),
)
```

### 种子颜色

```dart
Color.fromARGB(125, 230, 90, 255)
```

这个颜色是应用的种子颜色，Material 3 会基于这个颜色自动生成完整的配色方案。

## ColorScheme

### 生成配色方案

```dart
ColorScheme.fromSeed(
  seedColor: const Color.fromARGB(125, 230, 90, 255),
)
```

### 手动配置配色

```dart
ColorScheme(
  // 主色调
  primary: Color(0xFF6750A4),
  onPrimary: Color(0xFFFFFFFF),
  primaryContainer: Color(0xFFEADDFF),
  onPrimaryContainer: Color(0xFF21005D),

  // 次要色调
  secondary: Color(0xFF625B71),
  onSecondary: Color(0xFFFFFFFF),
  secondaryContainer: Color(0xFFE8DEF8),
  onSecondaryContainer: Color(0xFF1D192B),

  // 错误色调
  error: Color(0xFFB3261E),
  onError: Color(0xFFFFFFFF),
  errorContainer: Color(0xFFF9DEDC),
  onErrorContainer: Color(0xFF3C0804),

  // 背景色调
  background: Color(0xFFFFFBFE),
  onBackground: Color(0xFF1C1B1F),
  surface: Color(0xFFFFFBFE),
  onSurface: Color(0xFF1C1B1F),
)
```

## Material 3 组件

### 使用 Material 3 组件

```dart
// 按钮
ElevatedButton(
  onPressed: () {},
  child: Text('按钮'),
)

// 卡片
Card(
  child: Padding(
    padding: EdgeInsets.all(16),
    child: Text('卡片内容'),
  ),
)

// 输入框
TextField(
  decoration: InputDecoration(
    labelText: '标签',
    border: OutlineInputBorder(),
  ),
)
```

## 暗色主题

### 配置暗色主题

```dart
MaterialApp.router(
  theme: ThemeData(
    colorScheme: ColorScheme.fromSeed(
      seedColor: const Color.fromARGB(125, 230, 90, 255),
      brightness: Brightness.light,
    ),
    useMaterial3: true,
  ),
  darkTheme: ThemeData(
    colorScheme: ColorScheme.fromSeed(
      seedColor: const Color.fromARGB(125, 230, 90, 255),
      brightness: Brightness.dark,
    ),
    useMaterial3: true,
  ),
  themeMode: ThemeMode.system,  // 跟随系统
)
```

### 主题模式选项

| 模式 | 说明 |
|------|------|
| `ThemeMode.system` | 跟随系统设置 |
| `ThemeMode.light` | 始终使用亮色主题 |
| `ThemeMode.dark` | 始终使用暗色主题 |

## 自定义组件主题

### 按钮主题

```dart
theme: ThemeData(
  colorScheme: ColorScheme.fromSeed(...),
  elevatedButtonTheme: ElevatedButtonThemeData(
    style: ElevatedButton.styleFrom(
      padding: EdgeInsets.symmetric(horizontal: 24, vertical: 12),
      shape: RoundedRectangleBorder(
        borderRadius: BorderRadius.circular(8),
      ),
    ),
  ),
)
```

### 卡片主题

```dart
cardTheme: CardTheme(
  elevation: 2,
  shape: RoundedRectangleBorder(
    borderRadius: BorderRadius.circular(12),
  ),
  margin: EdgeInsets.all(8),
)
```

### 输入框主题

```dart
inputDecorationTheme: InputDecorationTheme(
  border: OutlineInputBorder(
    borderRadius: BorderRadius.circular(8),
  ),
  filled: true,
)
```

## 动态配色

### 跟随系统配色（Android 12+）

```dart
// 使用 dynamic_color 包
import 'package:dynamic_color/dynamic_color.dart';

DynamicColorBuilder(
  builder: (lightDynamic, darkDynamic) {
    return MaterialApp.router(
      theme: ThemeData(
        colorScheme: lightDynamic ?? ColorScheme.fromSeed(...),
        useMaterial3: true,
      ),
      darkTheme: ThemeData(
        colorScheme: darkDynamic ?? ColorScheme.fromSeed(...),
        useMaterial3: true,
      ),
    );
  },
)
```

## 主题切换

### 切换主题模式

```dart
class SettingsViewModel extends BaseViewModel {
  ThemeMode _themeMode = ThemeMode.system;

  ThemeMode get themeMode => _themeMode;

  void setThemeMode(ThemeMode mode) {
    _themeMode = mode;
    notifyListeners();
  }
}

// 在 MaterialApp 中使用
MaterialApp.router(
  themeMode: context.watch<SettingsViewModel>().themeMode,
  // ...
)
```

## 颜色工具

### 获取主题颜色

```dart
// 获取主色调
Theme.of(context).colorScheme.primary

// 获取背景色
Theme.of(context).colorScheme.background

// 获取表面色
Theme.of(context).colorScheme.surface

// 获取错误色
Theme.of(context).colorScheme.error
```

### 使用 Material 颜色

```dart
Container(
  color: Theme.of(context).colorScheme.primaryContainer,
  child: Text(
    '文本',
    style: TextStyle(
      color: Theme.of(context).colorScheme.onPrimaryContainer,
    ),
  ),
)
```

## 推荐配色

### 修改种子颜色

```dart
// 紫色主题
Color.fromARGB(255, 103, 80, 164)

// 蓝色主题
Color.fromARGB(255, 66, 133, 244)

// 绿色主题
Color.fromARGB(255, 76, 175, 80)

// 橙色主题
Color.fromARGB(255, 255, 112, 67)

// 红色主题
Color.fromARGB(255, 244, 67, 54)
```
