---
title: pubspec.yaml 配置
date: 2025-01-29 00:00:00
permalink: /reference/config/pubspec
categories:
  - 配置
tags:
  - 配置
  - pubspec
description: 介绍 OneTJ 的 pubspec.yaml 配置文件。
---

## pubspec.yaml 概述

`pubspec.yaml` 是 Flutter 项目的核心配置文件，定义了项目的基本信息、依赖项和资源文件。

## 项目基本信息

```yaml
name: onetj
description: "A new Flutter project."
publish_to: 'none'
version: 1.0.0+1
```

| 字段 | 说明 |
|------|------|
| `name` | 项目名称，必须唯一且小写 |
| `description` | 项目描述 |
| `publish_to` | 发布目标，`none` 表示不发布到 pub.dev |
| `version` | 版本号，格式为 `version+buildNumber` |

## 环境配置

```yaml
environment:
  sdk: ^3.6.2
```

指定项目所需的 Dart SDK 版本。

## 核心依赖

```yaml
dependencies:
  flutter:
    sdk: flutter
  flutter_localizations:
    sdk: flutter
  intl: any
  hive: ^2.2.3
  hive_flutter: ^1.1.0
  cupertino_icons: ^1.0.8
  go_router: ^14.2.0
  uuid: ^4.4.2
  shared_preferences: ^2.3.2
  http: ^1.6.0
  json_annotation: ^4.9.0
  logging: ^1.3.0
```

### 依赖说明

| 依赖 | 版本 | 用途 |
|------|------|------|
| **flutter** | SDK | Flutter 框架核心 |
| **flutter_localizations** | SDK | 国际化支持 |
| **intl** | any | 国际化和本地化工具 |
| **hive** | ^2.2.3 | 轻量级本地数据库 |
| **hive_flutter** | ^1.1.0 | Hive 的 Flutter 插件 |
| **go_router** | ^14.2.0 | 声明式路由管理 |
| **http** | ^1.6.0 | HTTP 请求库 |
| **json_annotation** | ^4.9.0 | JSON 序列化注解 |
| **logging** | ^1.3.0 | 日志记录 |
| **shared_preferences** | ^2.3.2 | 键值对存储 |

## 本地插件

```yaml
flutter_inappwebview:
    path: ./local_packages/flutter_inappwebview/flutter_inappwebview
```

使用本地路径的插件，用于支持鸿蒙平台。

## 开发依赖

```yaml
dev_dependencies:
  flutter_test:
    sdk: flutter
  flutter_lints: ^5.0.0
  json_serializable: ^6.9.5
  build_runner: ^2.4.15
```

| 依赖 | 用途 |
|------|------|
| **flutter_test** | Flutter 测试框架 |
| **flutter_lints** | Dart 代码规范检查 |
| **json_serializable** | JSON 序列化代码生成 |
| **build_runner** | 代码生成工具 |

## Flutter 配置

```yaml
flutter:
  uses-material-design: true
  assets:
    - assets/icon/logo.jpg
    - assets/pictures/1.jpg
  generate: true
```

### 配置项说明

| 配置项 | 说明 |
|--------|------|
| `uses-material-design` | 启用 Material Design |
| `assets` | 静态资源文件列表 |
| `generate` | 自动生成文件 |

## 应用图标配置

```yaml
flutter_launcher_icons:
  android: "launcher_icon"
  ios: false
  image_path: "assets/icon/logo.jpg"
```

使用 `flutter_launcher_icons` 插件自动生成应用图标。

## 依赖覆盖

```yaml
dependency_overrides:
  path_provider:
    git:
      url: "https://gitcode.com/openharmony-tpc/flutter_packages.git"
      path: "packages/path_provider/path_provider"
  flutter_inappwebview_platform_interface:
    path: ./local_packages/flutter_inappwebview/flutter_inappwebview_platform_interface
  flutter_inappwebview_android:
    path: ./local_packages/flutter_inappwebview/flutter_inappwebview_android
  # ... 其他平台实现
```

### 覆盖说明

- 使用鸿蒙版本的 `path_provider`
- 使用本地版本的 `flutter_inappwebview` 各平台实现

## 添加新依赖

### 添加 pub.dev 依赖

```bash
fvm flutter pub add <package-name>
```

### 添加本地依赖

```yaml
dependencies:
  my_package:
    path: ./path/to/package
```

### 添加 Git 依赖

```yaml
dependencies:
  my_package:
    git:
      url: https://github.com/username/repo.git
      ref: main
```

## 常用命令

```bash
# 获取依赖
fvm flutter pub get

# 升级依赖
fvm flutter pub upgrade

# 清除依赖缓存
fvm flutter pub cache repair

# 查看过期依赖
fvm flutter pub outdated
```
