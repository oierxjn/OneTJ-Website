---
title: 环境准备
date: 2025-01-29 00:00:00
permalink: /guide/quickstart/env
categories:
  - 指南
tags:
  - 指南
  - 快速开始
description: 准备 OneTJ 开发所需的开发环境。
---

## 系统要求

开发 OneTJ 需要准备以下开发环境：

| 工具 | 最低版本 | 推荐版本 |
|------|---------|---------|
| **Flutter SDK** | 3.6.2 | 3.27.4 (鸿魔版) |
| **Dart SDK** | 3.6.2 | 3.6.2+ |
| **Git** | 2.0+ | 最新版 |
| **IDE** | VS Code / Android Studio | 最新版 |

## 安装 Flutter

### 使用 FVM（推荐）

FVM（Flutter Version Management）是一个管理多个 Flutter 版本的工具，推荐使用 FVM 来管理项目的 Flutter 版本。

#### 安装 FVM

::: code-group

```sh [macOS/Linux]
brew tap leoafarias/fvm
brew install fvm

# 或通过 pub 安装
dart pub global activate fvm
```

```sh [Windows]
# 通过 Chocolatey 安装
choco install fvm

# 或通过 pub 安装
dart pub global activate fvm
```

:::

#### 安装鸿魔版 Flutter

OneTJ 使用支持鸿蒙的 Flutter 版本：

```bash
# 拉取鸿魔版 Flutter
git clone -b oh-3.27.4-dev https://gitcode.com/openharmony-tpc/flutter_flutter.git

# 将其放入 FVM 的版本文件夹中
# macOS: ~/.fvm/versions/
# Windows: %LOCALAPPDATA%\fvm\versions\
```

#### 使用项目 Flutter 版本

```bash
# 进入项目目录
cd OneTJ

# 设置使用项目的 Flutter 版本
fvm use <版本名>

# 验证安装
fvm flutter doctor
```

### 直接安装 Flutter

如果不使用 FVM，可以直接下载并安装 Flutter SDK：

1. 访问 [Flutter 官网](https://flutter.dev/docs/get-started/install)
2. 下载对应操作系统的 Flutter SDK
3. 解压并配置环境变量

## 安装鸿蒙开发工具（可选）

如果需要编译鸿蒙版本，需要安装鸿蒙 Command Line Tools：

1. 下载 [Command Line Tools](https://developer.huawei.com/consumer/cn/download/command-line-tools-for-hmos)
2. 将解压路径下的 `command-line-tools\bin` 目录配置到系统 PATH 环境变量中

## IDE 设置

### VS Code

推荐使用 VS Code 进行开发，需要安装以下插件：

| 插件名称 | 说明 |
|---------|------|
| **Flutter** | Flutter 官方插件 |
| **Dart** | Dart 语言支持 |

安装方法：

1. 打开 VS Code
2. 进入扩展商店
3. 搜索并安装上述插件

### Android Studio

也可以使用 Android Studio：

1. 安装 Android Studio
2. 安装 Flutter 和 Dart 插件
3. 配置 Flutter SDK 路径

## 验证环境

运行以下命令验证开发环境是否配置正确：

```bash
fvm flutter doctor
```

输出示例：

```
[✓] Flutter (Channel unknown, 3.27.4, on macOS 14.5 23F79)
[✓] Android toolchain - develop for Android devices
[✓] Xcode - develop for iOS and macOS
[✓] Chrome - develop for the web
[✓] Android Studio
[✓] VS Code
[✓] Connected device
```

## 配置编辑器

### VS Code 配置

创建 `.vscode/settings.json`：

```json
{
  "dart.flutterSdkPath": ".fvm/flutter_sdk",
  "search.exclude": {
    "**/.fvm": true
  },
  "files.watcherExclude": {
    "**/.fvm": true
  }
}
```

## 常见问题

### FVM 找不到 Flutter 版本

```bash
# 列出已安装的版本
fvm list

# 重新安装版本
fvm install <版本名>
```

### Flutter Doctor 报错

- 确保 Flutter SDK 路径正确
- 检查 Android/iOS 开发环境是否完整
- 参考官方文档解决具体错误

### 鸿蒙编译环境配置

鸿蒙开发环境配置较为复杂，如遇问题请联系项目维护者。
